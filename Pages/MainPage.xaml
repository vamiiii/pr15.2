<Page x:Class="pr15.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:pr15.Pages"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      DataContext="{Binding RelativeSource={RelativeSource Self}}"
      mc:Ignorable="d" 
      d:DesignHeight="500" d:DesignWidth="800"
      Title="Главная страница"  >
    <Page.Resources>

        <local:LowStockConverter x:Key="g2"/>

    </Page.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <Label Grid.Row="0" FontSize="16">Главная страница</Label>


        <StackPanel Orientation="Horizontal" x:Name="ControlPanel" Grid.Row="1">


            <Button Click="Button_Click_6" >Назад</Button>

            <Button Click="Button_Click_1" x:Name="b1">Добавить</Button>

            <Button Click="remove" x:Name="b2">Удалить</Button>
            <Button Click="Button_Click_2" x:Name="b3">Брэнды</Button>
            <Button Click="Button_Click_3" x:Name="b4">Категории</Button>
            <Button Click="Button_Click_4" x:Name="b5">Тэги</Button>
            <Button Click="Button_Click_5" x:Name="b6">Добавить тэги</Button>
            
        </StackPanel>





        <Grid Margin="5" Grid.Row="2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
            <Label>Поиск</Label>
            <TextBox TextChanged="TextBox_TextChanged" Text="{Binding searchQuery, UpdateSourceTrigger=PropertyChanged}" materialDesign:HintAssist.Hint="Введите текст для
поиска"/>
        </StackPanel>
        <StackPanel Grid.Row="1" Grid.Column="0">
            <Label FontSize="16">Сортировка</Label>
            <ComboBox SelectionChanged="ComboBox_SelectionChanged" x:Name="c1">
                <ComboBox.Items>
                    <ComboBoxItem Tag="Name">По наименованию</ComboBoxItem>
                    <ComboBoxItem Tag="Price">По цене(возрастание)</ComboBoxItem>
                        <ComboBoxItem Tag="Price1">По цене(убывание)</ComboBoxItem>
                        <ComboBoxItem Tag="Stock">По количеству(возрастание)</ComboBoxItem>
                        <ComboBoxItem Tag="Stock1">По количеству(убывание)</ComboBoxItem>
                    </ComboBox.Items>
            </ComboBox>
            <Label>Фильтры</Label>
            <StackPanel>
                <Label FontSize="16">Фильтр по цене</Label>
                <Label>от</Label>
                <TextBox Text="{Binding filterHeightFrom,
UpdateSourceTrigger=PropertyChanged}" materialDesign:HintAssist.Hint="Введите
цену" TextChanged="TextBox_TextChanged" x:Name="t1"/>
                <Label>до</Label>
                <TextBox Text="{Binding filterHeightTo,
UpdateSourceTrigger=PropertyChanged}" materialDesign:HintAssist.Hint="Введите
цену" TextChanged="TextBox_TextChanged" x:Name="t2"/>
            </StackPanel>

            <Label FontSize="16">Фильтр по категории</Label>
                <ComboBox ItemsSource="{Binding categoryService.Users}"  DisplayMemberPath="Name" SelectionChanged="ComboBox_SelectionChanged1" SelectedValue="{Binding  filterCategory, UpdateSourceTrigger=PropertyChanged}" x:Name="c2">
            </ComboBox>

            <Label FontSize="16">Фильтр по брэнду</Label>
                <ComboBox ItemsSource="{Binding brandService.Users}"  DisplayMemberPath="Name" SelectionChanged="ComboBox_SelectionChanged1" SelectedValue="{Binding  filterBrand, UpdateSourceTrigger=PropertyChanged}" x:Name="c3">
            </ComboBox>





            <Button Margin="5" Click="Button_Click">Сбросить</Button>
        </StackPanel>
        <materialDesign:ColorZone Grid.Row="1" Grid.Column="1"
Mode="SecondaryMid">
                <ListView HorizontalContentAlignment="Stretch" ItemsSource="{Binding forms}" Name="FormsList" SelectedItem="{Binding Product1}"  >
                <ListView.ItemTemplate>
                    <DataTemplate>

                        <Border x:Name="productBorder"
                    BorderThickness="2"
                    CornerRadius="8"
                    Padding="10"
                    Margin="5">

                            <Border.Style>
                                <Style TargetType="Border">
                                    
                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                    
                                    <Style.Triggers>

                                        <DataTrigger Binding="{Binding Stock, Converter={StaticResource g2}}" Value="True">
                                            <Setter Property="BorderBrush" Value="#ffd129"/>
                                            
                                          
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition Height="35"></RowDefinition>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{Binding Name}" FontSize="16"/>
                                        <TextBlock >
                                            <Run Text="★" Foreground="Gold"></Run>
                                             <Run Text="{Binding Rating}"></Run>
                                        </TextBlock>
                                    <TextBlock>

<Run Text="{Binding Category.Name}"/>
                                    </TextBlock>
                                    <TextBlock>

<Run Text="{Binding Description}"/>
                                    </TextBlock>
                                    <TextBlock>

<Run Text="{Binding Brand.Name}"/>
                                    </TextBlock>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock HorizontalAlignment="Right" >
<Run Text="Цена:"/>
<Run Text="{Binding Price, StringFormat={}{0:F2}}"/>
                                    </TextBlock>
                                    <TextBlock HorizontalAlignment="Right" Margin="0,38,0,0">
<Run Text="Остаток:"/>
<Run Text="{Binding Stock}"/>
                                    </TextBlock>
                                </StackPanel>



                                <ListView HorizontalContentAlignment="Stretch" ItemsSource="{Binding Tags}" Grid.Row="1" ScrollViewer.VerticalScrollBarVisibility="Disabled">

                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>


                                    <ListView.ItemTemplate >
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock>
        <Run Text="#"></Run>
        <Run Text="{Binding Name}"></Run>
                                                </TextBlock>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                </ListView>





                            </Grid>

                        </Border>
                           
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </materialDesign:ColorZone>
        <WrapPanel Grid.Row="2" Grid.ColumnSpan="2">
            <TextBlock Text="{Binding forms.Count, StringFormat='{}Всего записей: {0}'}"/>
            <TextBlock Text="{Binding Items.Count, ElementName=FormsList,
StringFormat='{} Показано: {0}'}"/>
        </WrapPanel>
    </Grid>
    </Grid>
</Page>
